<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI 绘图作品集 - 贺伯AI实战笔记</title>
  <meta name="description" content="贺伯的AI绘图创意作品集，包含多层地貌悬浮、手绘少女、雪岭红阳等AI生成艺术作品。">
  <meta property="og:title" content="AI 绘图作品集 - 贺伯AI实战笔记">
  <meta property="og:description" content="23幅AI绘图创意作品，展示AI艺术创作的无限可能。">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/avatar.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav class="site-nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo">贺伯AI实战笔记</a>
      <ul class="nav-menu" id="navMenu">
        <li><a href="index.html">首页</a></li>
        <li><a href="tools.html">贺伯工具库</a></li>
        <li><a href="blog.html">贺伯的文章</a></li>
        <li><a href="index.html#about">关于贺伯</a></li>
        <li><a href="admin/public/login.html" class="nav-admin">管理后台</a></li>
      </ul>
      <button class="nav-toggle" aria-label="菜单" onclick="document.getElementById('navMenu').classList.toggle('open')">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <div class="page-content">
    <div class="page-header">
      <h1>AI 绘图作品集</h1>
      <p>使用 AI 工具创作的艺术作品，探索人工智能与创意的交汇</p>
    </div>
    <div class="featured-section" id="featuredSection">
      <div class="loading-skeleton">加载中...</div>
    </div>
    <p class="section-label">全部作品</p>
    <div class="gallery-grid" id="galleryGrid"></div>
  </div>

  <div class="lightbox" id="lightbox">
    <button class="lightbox-close" id="lbClose">&times;</button>
    <button class="lightbox-nav lightbox-prev" id="lbPrev">&#8249;</button>
    <button class="lightbox-nav lightbox-next" id="lbNext">&#8250;</button>
    <img id="lbImg" src="" alt="">
    <div class="lightbox-info" id="lbInfo"></div>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">
      <p class="footer-copy">&copy; 2025 贺伯AI实战笔记. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="index.html">首页</a></li>
        <li><a href="tools.html">贺伯工具库</a></li>
        <li><a href="blog.html">贺伯的文章</a></li>
        <li><a href="index.html#about">关于贺伯</a></li>
      </ul>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      var featuredSection = document.getElementById('featuredSection');
      var galleryGrid = document.getElementById('galleryGrid');
      var allImages = [];

      try {
        var res = await fetch('/api/gallery');
        if (!res.ok) throw new Error('API error');
        allImages = await res.json();
      } catch (e) {
        featuredSection.innerHTML = '<div class="loading-skeleton">数据加载失败，请稍后再试</div>';
        return;
      }

      var featuredItems = allImages.filter(function(img) { return img.featured; });

      if (featuredItems.length > 0) {
        var fHtml = '<p class="section-label">精选作品</p><div class="featured-grid">';
        featuredItems.forEach(function(f) {
          fHtml += '<div class="featured-card" data-src="' + f.src + '"><img src="' + f.src + '" alt="' + (f.title || 'AI 绘图') + '" loading="lazy">' +
            '<div class="featured-overlay"><span class="featured-tag">' + (f.style || 'AI 绘图') + '</span>' +
            '<h3 class="featured-title">' + f.title + '</h3><p class="featured-desc">' + (f.description || '') + '</p></div></div>';
        });
        fHtml += '</div>';
        featuredSection.innerHTML = fHtml;
      } else {
        featuredSection.innerHTML = '';
      }

      galleryGrid.innerHTML = allImages.map(function(img) {
        return '<div class="gallery-item" data-src="' + img.src + '"><img src="' + img.src + '" alt="' + (img.title || 'AI 绘图作品') + '" loading="lazy"></div>';
      }).join('');

      // Lightbox
      var lightbox = document.getElementById('lightbox');
      var lbImg = document.getElementById('lbImg');
      var lbInfo = document.getElementById('lbInfo');
      var currentIndex = 0;

      function openLightbox(index) {
        currentIndex = index;
        var img = allImages[index];
        lbImg.src = img.src;
        var hasTitle = img.title && img.title !== 'AI 绘图作品';
        lbInfo.innerHTML = hasTitle
          ? '<strong>' + img.title + '</strong>' + (img.description ? '<br>' + img.description : '') + (img.style ? '<br><small>' + img.style + '</small>' : '')
          : (index + 1) + ' / ' + allImages.length;
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
      }

      function closeLightbox() { lightbox.classList.remove('active'); document.body.style.overflow = ''; }
      function navigate(dir) { currentIndex = (currentIndex + dir + allImages.length) % allImages.length; openLightbox(currentIndex); }

      document.addEventListener('click', function(e) {
        var card = e.target.closest('.gallery-item, .featured-card');
        if (!card) return;
        var src = card.dataset.src;
        var idx = allImages.findIndex(function(img) { return img.src === src; });
        if (idx >= 0) openLightbox(idx);
      });

      document.getElementById('lbClose').addEventListener('click', closeLightbox);
      document.getElementById('lbPrev').addEventListener('click', function(e) { e.stopPropagation(); navigate(-1); });
      document.getElementById('lbNext').addEventListener('click', function(e) { e.stopPropagation(); navigate(1); });
      lightbox.addEventListener('click', function(e) { if (e.target === lightbox) closeLightbox(); });

      document.addEventListener('keydown', function(e) {
        if (!lightbox.classList.contains('active')) return;
        if (e.key === 'Escape') closeLightbox();
        if (e.key === 'ArrowLeft') navigate(-1);
        if (e.key === 'ArrowRight') navigate(1);
      });

      document.querySelectorAll('.nav-menu a').forEach(function(a) {
        a.addEventListener('click', function() { document.getElementById('navMenu').classList.remove('open'); });
      });
    });
  </script>

</body>
</html>
