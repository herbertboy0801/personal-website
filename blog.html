<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è´ºä¼¯çš„æ–‡ç«  - è´ºä¼¯AIå®æˆ˜ç¬”è®°</title>
  <meta name="description" content="è´ºä¼¯çš„AIç¼–ç¨‹å®æˆ˜æ–‡ç« åˆé›†ï¼Œæ¥è‡ªå…¬ä¼—å·ã€Œè´ºä¼¯è°ˆAIã€å’Œå°çº¢ä¹¦ï¼Œåˆ†äº«AIç¼–ç¨‹æŠ€å·§ä¸å®è·µç»éªŒã€‚">
  <meta property="og:title" content="è´ºä¼¯çš„æ–‡ç«  - è´ºä¼¯AIå®æˆ˜ç¬”è®°">
  <meta property="og:description" content="96+ç¯‡AIç¼–ç¨‹å®æˆ˜æ–‡ç« ï¼Œæ¶µç›–Claude Codeã€n8nè‡ªåŠ¨åŒ–ã€AIå·¥å…·å¼€å‘ç­‰é¢†åŸŸã€‚">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/avatar.jpg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav class="site-nav">
    <div class="nav-inner">
      <a href="index.html" class="nav-logo">è´ºä¼¯AIå®æˆ˜ç¬”è®°</a>
      <ul class="nav-menu" id="navMenu">
        <li><a href="index.html">é¦–é¡µ</a></li>
        <li><a href="tools.html">è´ºä¼¯å·¥å…·åº“</a></li>
        <li><a href="blog.html" class="nav-active">è´ºä¼¯çš„æ–‡ç« </a></li>
        <li><a href="index.html#about">å…³äºè´ºä¼¯</a></li>
        <li><a href="admin/public/login.html" class="nav-admin">ç®¡ç†åå°</a></li>
      </ul>
      <button class="nav-toggle" aria-label="èœå•" onclick="document.getElementById('navMenu').classList.toggle('open')">
        <span></span><span></span><span></span>
      </button>
    </div>
  </nav>

  <div class="page-wrapper">
    <aside class="sidebar">
      <h3>æ–‡ç« ç­›é€‰</h3>
      <ul class="cat-list" id="catList"></ul>
    </aside>
    <section class="blog-main">
      <div class="blog-header">
        <h1>è´ºä¼¯çš„æ–‡ç« </h1>
        <p id="blogCount"></p>
      </div>
      <div class="blog-list" id="blogList">
        <div class="loading-skeleton">åŠ è½½ä¸­...</div>
      </div>
    </section>
  </div>

  <footer class="site-footer">
    <div class="footer-inner">
      <p class="footer-copy">&copy; 2025 è´ºä¼¯AIå®æˆ˜ç¬”è®°. All rights reserved.</p>
      <ul class="footer-links">
        <li><a href="index.html">é¦–é¡µ</a></li>
        <li><a href="tools.html">è´ºä¼¯å·¥å…·åº“</a></li>
        <li><a href="blog.html">è´ºä¼¯çš„æ–‡ç« </a></li>
        <li><a href="index.html#about">å…³äºè´ºä¼¯</a></li>
      </ul>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      var list = document.getElementById('blogList');
      var catList = document.getElementById('catList');
      var countEl = document.getElementById('blogCount');
      var posts = [];

      try {
        var res = await fetch('/api/blog');
        if (!res.ok) throw new Error('API error');
        posts = await res.json();
      } catch (e) {
        list.innerHTML = '<div class="blog-empty">æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åå†è¯•</div>';
        return;
      }

      posts.sort(function(a, b) { return (b.date || '').localeCompare(a.date || ''); });

      var sourceClass = { 'å°çº¢ä¹¦': 'xiaohongshu', 'å…¬ä¼—å·': 'gongzhonghao' };
      var categoryNames = { 'claude-code': 'Claude Code', 'n8n-automation': 'n8n è‡ªåŠ¨åŒ–', 'automation': 'AI è‡ªåŠ¨åŒ–' };
      var categoryIcons = { 'claude-code': 'ğŸ¤–', 'n8n-automation': 'âš¡', 'automation': 'ğŸ”§' };
      var difficultyNames = { 'beginner': 'å…¥é—¨', 'intermediate': 'è¿›é˜¶', 'advanced': 'é«˜çº§' };

      var categories = {};
      var sources = {};
      posts.forEach(function(p) {
        categories[p.category || 'other'] = (categories[p.category || 'other'] || 0) + 1;
        sources[p.source || 'å…¶ä»–'] = (sources[p.source || 'å…¶ä»–'] || 0) + 1;
      });

      var html = '<li><a href="#" class="active" data-filter="all"><span class="cat-icon">ğŸ“„</span>å…¨éƒ¨æ–‡ç« <span class="cat-count">' + posts.length + '</span></a></li>';
      var featuredCount = posts.filter(function(p) { return p.featured; }).length;
      if (featuredCount > 0) {
        html += '<li><a href="#" data-filter="featured"><span class="cat-icon">â­</span>ç²¾é€‰æ¨è<span class="cat-count">' + featuredCount + '</span></a></li>';
      }
      html += '</ul><h4>æ–‡ç« åˆ†ç±»</h4><ul class="cat-list">';
      Object.keys(categories).forEach(function(c) {
        html += '<li><a href="#" data-filter="category:' + c + '"><span class="cat-icon">' + (categoryIcons[c] || 'ğŸ“‚') + '</span>' + (categoryNames[c] || c) + '<span class="cat-count">' + categories[c] + '</span></a></li>';
      });
      html += '</ul><h4>æ–‡ç« æ¥æº</h4><ul class="cat-list">';
      var sourceIcons = { 'å…¬ä¼—å·': 'ğŸ’¬', 'å°çº¢ä¹¦': 'ğŸ“•' };
      Object.keys(sources).forEach(function(s) {
        html += '<li><a href="#" data-filter="source:' + s + '"><span class="cat-icon">' + (sourceIcons[s] || 'ğŸ“‚') + '</span>' + s + '<span class="cat-count">' + sources[s] + '</span></a></li>';
      });
      catList.innerHTML = html;

      function renderPosts(filter) {
        var filtered;
        if (filter === 'all') filtered = posts;
        else if (filter === 'featured') filtered = posts.filter(function(p) { return p.featured; });
        else if (filter.indexOf('category:') === 0) { var cat = filter.replace('category:', ''); filtered = posts.filter(function(p) { return p.category === cat; }); }
        else if (filter.indexOf('source:') === 0) { var src = filter.replace('source:', ''); filtered = posts.filter(function(p) { return p.source === src; }); }
        else filtered = posts;

        countEl.textContent = 'å…± ' + filtered.length + ' ç¯‡æ–‡ç« ';
        if (filtered.length === 0) { list.innerHTML = '<div class="blog-empty">æš‚æ— æ–‡ç« </div>'; return; }

        list.innerHTML = filtered.map(function(p) {
          var sc = sourceClass[p.source] || 'gongzhonghao';
          var featuredHtml = p.featured ? '<span class="blog-featured">ç²¾é€‰</span>' : '';
          var dayHtml = p.dayNumber ? '<span class="blog-day">Day ' + p.dayNumber + '</span>' : '';
          var catLabel = categoryNames[p.category] || p.category || '';
          var catHtml = catLabel ? '<span class="blog-category">' + catLabel + '</span>' : '';
          var diffHtml = p.difficulty ? '<span class="blog-difficulty ' + p.difficulty + '">' + (difficultyNames[p.difficulty] || p.difficulty) + '</span>' : '';
          var dateHtml = p.date ? '<span class="blog-card-date">' + p.date + '</span>' : '';
          var readHtml = p.readTime ? '<span class="blog-card-readtime">' + p.readTime + '</span>' : '';
          var tagsHtml = '';
          if (p.tags && p.tags.length > 0) {
            tagsHtml = '<div class="blog-card-tags">' + p.tags.map(function(t) { return '<span class="blog-tag">' + t + '</span>'; }).join('') + '</div>';
          }
          var hasLink = p.link && p.link !== '#';
          var ctaText = hasLink ? 'é˜…è¯»åŸæ–‡ â†’' : 'å³å°†ä¸Šçº¿';
          var ctaStyle = hasLink ? '' : ' style="color:var(--text-dim);"';
          return '<a href="' + (hasLink ? p.link : 'javascript:void(0)') + '" class="blog-card"' + (hasLink ? ' target="_blank" rel="noopener noreferrer"' : '') + '>' +
            '<div class="blog-card-accent"></div><div class="blog-card-body">' +
            '<div class="blog-card-meta"><span class="blog-source ' + sc + '">' + (p.source || 'æ–‡ç« ') + '</span>' + catHtml + dayHtml + featuredHtml + '</div>' +
            '<h3 class="blog-card-title">' + p.title + '</h3><p class="blog-card-summary">' + p.summary + '</p>' + tagsHtml +
            '<div class="blog-card-footer">' + dateHtml + readHtml + diffHtml + '</div>' +
            '<span class="blog-card-cta"' + ctaStyle + '>' + ctaText + '</span></div></a>';
        }).join('');
      }

      renderPosts('all');

      var sidebar = catList.closest('.sidebar');
      sidebar.addEventListener('click', function(e) {
        var a = e.target.closest('a[data-filter]');
        if (!a) return;
        e.preventDefault();
        sidebar.querySelectorAll('a').forEach(function(el) { el.classList.remove('active'); });
        a.classList.add('active');
        renderPosts(a.dataset.filter);
      });

      document.querySelectorAll('.nav-menu a').forEach(function(a) {
        a.addEventListener('click', function() { document.getElementById('navMenu').classList.remove('open'); });
      });
    });
  </script>

</body>
</html>
